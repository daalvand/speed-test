FROM phpswoole/swoole:5.0-php8.2

WORKDIR /var/www/html

ARG UID=1000
ARG GID=$UID
RUN groupmod -g $GID www-data
RUN usermod -u $UID www-data

RUN apt-get update
RUN apt-get install -y ${PHPIZE_DEPS} libicu-dev
RUN docker-php-ext-install intl pcntl
RUN apt-get remove -y ${PHPIZE_DEPS}

#install composer
COPY --from=composer:2.5.4 /usr/bin/composer /usr/local/bin/composer
RUN mkdir -p /var/www/.composer && chown $UID:$GID -R /var/www/.composer
