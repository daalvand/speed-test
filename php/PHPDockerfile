FROM php:8.2-fpm

WORKDIR /var/www/html

ARG UID=1000
ARG GID=$UID
RUN groupmod -g $GID www-data
RUN usermod -u $UID www-data

RUN apt-get update
RUN apt-get install -y ${PHPIZE_DEPS} libicu-dev
RUN pecl install swoole
RUN docker-php-ext-enable swoole
RUN docker-php-ext-install intl pcntl
RUN apt-get remove -y ${PHPIZE_DEPS}

#install composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer
RUN mkdir -p /var/www/.composer && chown $UID:$GID -R /var/www/.composer
